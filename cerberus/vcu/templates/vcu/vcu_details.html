{% extends 'menu.html' %}
{% load static %}
{% block head %}
    <title>VCU | Cerberus</title>
    <link rel="stylesheet" href="{% static 'battery_module/css/base.css' %}">
{% endblock head %}


{% block menu %}
   <div class="row p-5 bg-white">
      <div class="col-md-6">
      </div>
      <div class="col-md-6">
         {% comment %} <form method="post" id="view-battery-search-form">
            {% csrf_token %}
            <div class="input-group mb-3">
               <input type="text" class="form-control" id="view-battery-search-bar" placeholder="Enter Battey pack serial no..." aria-label="Search" aria-describedby="search-addon" name="search_text"/>
               
               <button type="submit" class="btn btn-outline-secondary" id="view-battery-search-button">
                  search
               </button> 
            </div>
         </form> {% endcomment %}
      </div>
   </div>
   <div class="row px-5 bg-white">
      <div class="col-md-12">
         <h3>VCU Data</h3>
         <table  class="mt-3 table caption-top table-responsive table-height">
            <thead>
               <tr>
                  <th scope="col">Asset_Tag</th>
                  <th scope="col">Snipeit_IMEI</th>
                  <th scope="col">Purchase_Date</th>
                  <th scope="col">Purchase_Date_+_Interval_+_Warranty_Months</th>
                  <th scope="col">Snipeit_Vehicle_Type_45</th>
                  <th scope="col">Snipeit_Vehicle_Configuration_46</th>
                  <th scope="col">Status</th>
                  <th scope="col">Owner</th>
                  <th scope="col">Action</th>
               </tr>
            </thead>
            <tbody> 
              

               {% for tag in vcu_data %} 
               
               <tr>
                  <td>
                     {% if tag.asset_tag %}
                        {{ tag.asset_tag }}
                     {% else %}
                        -
                     {% endif %}
                  </td>
                  <td>
                     {% if tag.snipeit_imei %}
                        {{ tag.snipeit_imei }}
                     {% else %}
                        -
                     {% endif %}
                  </td>
                  <td>
                     {% if tag.purchase_date %}
                        {{ tag.purchase_date }}
                     {% else %}
                        -
                     {% endif %}
                  </td>
                  <td>
                     {% if tag.purchase_date_interval_warranty_months %}
                        {{tag.purchase_date_interval_warranty_months}}
                     {% else %}
                        -
                     {% endif %}
                  </td>
                  <td>
                     {% if tag.snipeit_vechicle_type_45 %}
                        {{tag.snipeit_vechicle_type_45}}
                     {% else %}
                        -
                     {% endif %}
                  </td>
                  <td>
                     {% if tag.snipeit_vechicle_configuration_46 %}
                        {{tag.snipeit_vechicle_configuration_46}}
                     {% else %}
                        -
                     {% endif %}
                  </td>
                  <td>
                     {% if tag.status %}
                        {{tag.status}}
                     {% else %}
                        -
                     {% endif %}
                  </td>
                  <td>
                     {% if tag.owner %}
                        {{tag.owner}}
                     {% else %}
                        -
                     {% endif %}
                  </td>
                  <td>
                     <div class="btn-group">
                        <a href="{% url 'update_vcu' tag.asset_tag %}" class="btn btn-light btn-sm"><img class="action_btn" src="{% static 'battery_module/images/action_btns/edit.svg' %}" alt="edit.svg"></a>
                        <a class="btn btn-light btn-sm" id = "vcu_delete_btn" data-vcu_name = "{{ tag.asset_tag }}"><img class="action_btn" src="{% static 'battery_module/images/action_btns/delete.svg' %}" alt="delete.svg"></button>
                        <a href="{% url 'vcu_grafana' tag.asset_tag %}" class="btn btn-light btn-sm"><img class="action_btn" src="{% static 'battery_module/images/action_btns/data-update.svg' %}" alt="data-update.svg"></a>
                     </div>
                  </td> 
               </tr>

               <div class="modal" tabindex="-1" id="delete_modal">
                  <div class="modal-dialog">
                        <div class="modal-content">
                           <div class="modal-header">
                              <h5 class="modal-title">Delete VCU <span id="vcu_name"></span></h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                           </div>
                           <div class="modal-body">
                              <p>Are You sure to delete VCU <span id="vcu_name_msg"></span></p>
                           </div>
                           <div class="modal-footer">
                              <form method="post">
                                    {% csrf_token %}
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-danger" id = "delete_vcu">Yes, Delete</button>
                              </form>
                           </div>
                        </div>
                  </div>
               </div>

               
               {% endfor %}
            </tbody>
         </table>
         {% if vcu_data|length == 0 %}
          <h4 class="text-center text-muted" >No data</h4>
         {% endif %}
      </div>
   </div>

   <script src="{% static 'battery_module/js/base.js' %}"></script>
   <script>
      $("#vcu-tab").addClass("active-menu-icon-bg");
   </script>

{% endblock menu %}   